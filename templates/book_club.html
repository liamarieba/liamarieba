{% extends 'base.html' %}

{% block title %}Book Club Page{% endblock %}

{% block content %}
    <header>
        <h1>Welcome to the Book Club</h1>
        <!-- navigation links here eventually? -->
    </header>

    <section id="calendar">
        <h2>Upcoming Meetings</h2>
        <ul>
            {% for meeting in upcoming_meetings %}
                <li>{{ meeting.meeting_date }} - Topic: {{ meeting.topic }}</li>
            {% else %}
                <li>No upcoming meetings.</li>
            {% endfor %}
        </ul>
    </section>

    <section id="book-list">
        <h2>Books We've Read</h2>
        <ul>
            {% for book in books_read %}
                <li>{{ book.title }} by {{ book.author }}</li>
            {% else %}
                <li>No books read yet.</li>
            {% endfor %}
        </ul>
    </section>

    <section id="book-voting">
        <h2>Vote for the Next Book</h2>
        <form action="/vote_book" method="post">
            <label for="book-choice">Select a Book:</label>
            <select id="book-choice" name="book-choice">
                {% for nominated_book in nominated_books %}
                    <option value="{{ nominated_book.book.book_id }}">{{ nominated_book.book.title }} - Votes: {{ nominated_book.votes }}</option>
                {% else %}
                    <option>No books nominated yet.</option>
                {% endfor %}          
            </select>
            <input type="submit" value="Vote">
        </form>
    </section>

    <section id="date-voting">
        <h2>Vote for the Next Meeting Date</h2>
        <form action="/vote_date" method="post">
            <label for="meeting-date">Select a Date:</label>
            <select id="meeting-date" name="meeting-date">
                {% for meeting in meetings %}
                    <option value="{{ meeting.meeting_id }}">{{ meeting.meeting_date }}</option>
                {% else %}
                    <option>No dates available for voting.</option>
                {% endfor %}
            </select>
            <input type="submit" value="Vote">
        </form>

    </section>

    <section id="club-members">
        <h2>Club Members</h2>
        <ul>
            {% for member in club_members %}
                <li>{{ member.email }}</li>
            {% endfor %}
        </ul>
    </section>


{% endblock %}